# 数据分层

## 背景
在之前的一个项目中由于数据量巨大，并且数据并不是所有都会被实时用到，所有设计了一个数据分层存储方案

## 分层依据
对于数据来说，一般数据时间越远，访问的频率越低，所以将数据按照时间分层

## 热数据
到来的数据一般都会经过解析以后保存到ES中，将7天内的数据作为热数据，热数据保存在SSD节点上，并且索引设置为hot，便于检索

## 温数据
将7天到10天内的数据作为温数据，只作为检索，不再写入，将索引设置为cold，转移到更便宜的存储上

## 冷数据
将保存时间在10天以上的数据不再保存到es中，选择保存到OSS中，后续如果需要再重新解析

## 结果
按照测试，原本的es集群的qps承受能力从10w+到50w+